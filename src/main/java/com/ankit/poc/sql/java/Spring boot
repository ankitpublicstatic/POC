
Awesome üöÄ ‚Äî now let‚Äôs take that **Singleton + Factory + Builder** example and re-implement it in a **Spring Boot enterprise-style architecture**.

We‚Äôll make it production-ready, cleanly decoupled, and aligned with how it‚Äôs actually built in large systems.

---

# üß© 1Ô∏è‚É£ High-Level Design

We‚Äôll build a **NotificationService** that can send either **Email** or **SMS** notifications.
Spring Boot will handle:

* Singleton behavior via `@Component` beans
* Dependency Injection via `@Autowired`
* Configuration via `@Value` or `@ConfigurationProperties`

We‚Äôll use:

* **Factory Pattern** ‚Üí choose the right notification sender dynamically
* **Builder Pattern** ‚Üí build complex notification requests
* **Spring Container** ‚Üí manage Singletons automatically

---

# üß± 2Ô∏è‚É£ Project Structure

```
com.example.notification
 ‚îú‚îÄ‚îÄ builder
 ‚îÇ    ‚îú‚îÄ‚îÄ EmailNotificationBuilder.java
 ‚îÇ    ‚îî‚îÄ‚îÄ SmsNotificationBuilder.java
 ‚îú‚îÄ‚îÄ factory
 ‚îÇ    ‚îî‚îÄ‚îÄ NotificationFactory.java
 ‚îú‚îÄ‚îÄ model
 ‚îÇ    ‚îú‚îÄ‚îÄ NotificationRequest.java
 ‚îÇ    ‚îî‚îÄ‚îÄ NotificationType.java
 ‚îú‚îÄ‚îÄ service
 ‚îÇ    ‚îú‚îÄ‚îÄ NotificationService.java
 ‚îÇ    ‚îú‚îÄ‚îÄ EmailNotificationService.java
 ‚îÇ    ‚îî‚îÄ‚îÄ SmsNotificationService.java
 ‚îî‚îÄ‚îÄ NotificationApplication.java
```

---

# ‚öôÔ∏è 3Ô∏è‚É£ Model Classes

### ‚úÖ `NotificationType.java`

```java
package com.example.notification.model;

public enum NotificationType {
    EMAIL,
    SMS
}
```

---

### ‚úÖ `NotificationRequest.java`

```java
package com.example.notification.model;

public class NotificationRequest {
    private String recipient;
    private String subject;
    private String message;
    private NotificationType type;

    // Getters, Setters, and Builder pattern
    private NotificationRequest(Builder builder) {
        this.recipient = builder.recipient;
        this.subject = builder.subject;
        this.message = builder.message;
        this.type = builder.type;
    }

    public static class Builder {
        private String recipient;
        private String subject;
        private String message;
        private NotificationType type;

        public Builder recipient(String recipient) {
            this.recipient = recipient;
            return this;
        }

        public Builder subject(String subject) {
            this.subject = subject;
            return this;
        }

        public Builder message(String message) {
            this.message = message;
            return this;
        }

        public Builder type(NotificationType type) {
            this.type = type;
            return this;
        }

        public NotificationRequest build() {
            return new NotificationRequest(this);
        }
    }

    public String getRecipient() { return recipient; }
    public String getSubject() { return subject; }
    public String getMessage() { return message; }
    public NotificationType getType() { return type; }
}
```

---

# üß∞ 4Ô∏è‚É£ Service Layer (Business Logic)

### ‚úÖ `NotificationService.java` (Interface)

```java
package com.example.notification.service;

import com.example.notification.model.NotificationRequest;

public interface NotificationService {
    void sendNotification(NotificationRequest request);
}
```

---

### ‚úÖ `EmailNotificationService.java`

```java
package com.example.notification.service;

import org.springframework.stereotype.Service;
import com.example.notification.model.NotificationRequest;

@Service("emailNotificationService")
public class EmailNotificationService implements NotificationService {

    @Override
    public void sendNotification(NotificationRequest request) {
        System.out.println("üìß Sending EMAIL to " + request.getRecipient() +
                " | Subject: " + request.getSubject() +
                " | Message: " + request.getMessage());
    }
}
```

---

### ‚úÖ `SmsNotificationService.java`

```java
package com.example.notification.service;

import org.springframework.stereotype.Service;
import com.example.notification.model.NotificationRequest;

@Service("smsNotificationService")
public class SmsNotificationService implements NotificationService {

    @Override
    public void sendNotification(NotificationRequest request) {
        System.out.println("üì± Sending SMS to " + request.getRecipient() +
                " | Message: " + request.getMessage());
    }
}
```

---

# üè≠ 5Ô∏è‚É£ Factory (Singleton + Dynamic Bean Selection)

### ‚úÖ `NotificationFactory.java`

```java
package com.example.notification.factory;

import com.example.notification.model.NotificationType;
import com.example.notification.service.EmailNotificationService;
import com.example.notification.service.NotificationService;
import com.example.notification.service.SmsNotificationService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

@Component
public class NotificationFactory {

    private final EmailNotificationService emailService;
    private final SmsNotificationService smsService;

    @Autowired
    public NotificationFactory(EmailNotificationService emailService, SmsNotificationService smsService) {
        this.emailService = emailService;
        this.smsService = smsService;
    }

    public NotificationService getNotificationService(NotificationType type) {
        switch (type) {
            case EMAIL:
                return emailService;
            case SMS:
                return smsService;
            default:
                throw new IllegalArgumentException("Unknown Notification Type: " + type);
        }
    }
}
```

‚úÖ **Note:**

* `@Component` makes this factory a **Spring-managed singleton** automatically.
* No need for manual `synchronized` logic.

---

# üß† 6Ô∏è‚É£ Main Runner

### ‚úÖ `NotificationApplication.java`

```java
package com.example.notification;

import com.example.notification.factory.NotificationFactory;
import com.example.notification.model.NotificationRequest;
import com.example.notification.model.NotificationType;
import com.example.notification.service.NotificationService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.CommandLineRunner;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class NotificationApplication implements CommandLineRunner {

    @Autowired
    private NotificationFactory notificationFactory;

    public static void main(String[] args) {
        SpringApplication.run(NotificationApplication.class, args);
    }

    @Override
    public void run(String... args) {
        // Using Builder pattern to create the request
        NotificationRequest emailRequest = new NotificationRequest.Builder()
                .recipient("ankit@example.com")
                .subject("Spring Boot Factory Demo")
                .message("Factory + Builder + Singleton Example")
                .type(NotificationType.EMAIL)
                .build();

        NotificationService emailService = notificationFactory.getNotificationService(emailRequest.getType());
        emailService.sendNotification(emailRequest);

        NotificationRequest smsRequest = new NotificationRequest.Builder()
                .recipient("+919999999999")
                .message("Your order has been shipped.")
                .type(NotificationType.SMS)
                .build();

        NotificationService smsService = notificationFactory.getNotificationService(smsRequest.getType());
        smsService.sendNotification(smsRequest);
    }
}
```

---

# üßæ Output

```
üìß Sending EMAIL to ankit@example.com | Subject: Spring Boot Factory Demo | Message: Factory + Builder + Singleton Example
üì± Sending SMS to +919999999999 | Message: Your order has been shipped.
```

---

# üß© 7Ô∏è‚É£ Why This is Enterprise-Ready

| Pattern       | Where Used                                             | Benefit                                 |
| ------------- | ------------------------------------------------------ | --------------------------------------- |
| **Singleton** | `NotificationFactory` (`@Component` managed by Spring) | One global instance                     |
| **Factory**   | Inside Factory class (`getNotificationService`)        | Chooses correct implementation          |
| **Builder**   | In `NotificationRequest`                               | Builds clean, immutable request objects |

---

# ‚öôÔ∏è 8Ô∏è‚É£ Real Enhancements (for production use)

You can extend this design with:

* `@ConfigurationProperties` to read SMTP/SMS credentials from `.properties`.
* Add async support via `@Async` for non-blocking notifications.
* Add `@ConditionalOnProperty` to enable/disable notification types.
* Add REST endpoints to send notifications via API calls.

---

Would you like me to extend this into a **REST API version** (with `@RestController` and JSON request payloads) so that notifications can be triggered via HTTP POST request (real microservice pattern)?
