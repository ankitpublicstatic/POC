ACID ‚Üí correctness & reliability of transactions

Indexes ‚Üí performance & fast data access

1Ô∏è‚É£ ACID Properties in SQL Databases: Atomicity Consistency

ACID defines the guarantees a database gives when executing transactions.
A transaction = a sequence of SQL operations treated as a single unit.

Example:

	BEGIN;	
	UPDATE accounts SET balance = balance - 100 WHERE id = 1;
	UPDATE accounts SET balance = balance + 100 WHERE id = 2;	
	COMMIT;


If anything fails ‚Üí database must stay correct.

1. A ‚Äî Atomicity (All or Nothing)
A transaction either fully succeeds or fully fails

What it means

Partial changes are never committed
If one statement fails ‚Üí everything is rolled back

Example:-
	BEGIN;
	INSERT INTO orders VALUES (101, 'Ankit');
	INSERT INTO order_items VALUES (NULL, 101); -- fails (NULL not allowed)
	ROLLBACK;


‚úî No data is inserted at all
‚ùå Half-written data is not allowed

2. C ‚Äî Consistency (Valid State to Valid State)

Transactions move the database from one valid state to another

		What it ensures
				Constraints are never violated
				Rules like:
				Primary Key
				Foreign Key
				NOT NULL
				CHECK
				UNIQUE

Example:-
balance >= 0


If a transaction tries to violate this:

	UPDATE accounts SET balance = -500 WHERE id = 1;

‚ùå Transaction fails ‚Üí DB remains consistent

3. I ‚Äî Isolation (No Dirty Interference)

Concurrent transactions behave as if they ran one-by-one
Problem it solves
Multiple users accessing data at the same time.

Isolation issues

| Issue               | Meaning                           |
| ------------------- | --------------------------------- |
| Dirty Read          | Read uncommitted data             |
| Non-repeatable Read | Same query gives different result |
| Phantom Read        | New rows appear                   |


Isolation levels:-
	READ UNCOMMITTED
	READ COMMITTED
	REPEATABLE READ
	SERIALIZABLE


Example:-

	SET TRANSACTION ISOLATION LEVEL READ COMMITTED;


‚úî Higher isolation = safer
‚ùå Higher isolation = slower

4. D ‚Äî Durability (Once Committed, Always Saved)
 
After COMMIT, data survives crashes, power loss, restart

How DB ensures durability

Write-Ahead Logging (WAL)

Redo logs

Disk flush before commit

COMMIT;


‚úî Data is permanently stored
‚úî Survives DB restart

‚úÖ Summary of ACID
| Property    | Guarantees                   |
| ----------- | ---------------------------- |
| Atomicity   | No partial transactions      |
| Consistency | Rules always valid           |
| Isolation   | Concurrent safety            |
| Durability  | Data never lost after commit |

2Ô∏è‚É£ Index in SQL Databases

An index is a data structure that improves query performance.
Think of an index like a book‚Äôs index instead of scanning every page.

Why Indexes Exist

Without index:

	SELECT * FROM users WHERE email = 'ankit@gmail.com';


‚ùå Full table scan (slow)

With index:

	CREATE INDEX idx_user_email ON users(email);


‚úî Fast lookup (logarithmic time)

How Index Works Internally

Most SQL databases use B-Tree (or variants)

        [ M ]
       /     \
   [A-F]   [N-Z]


Balanced tree

Sorted

Fast search: O(log n)

Types of Indexes
1Ô∏è‚É£ Primary Index
PRIMARY KEY (id)


Automatically created

Unique + Not Null

2Ô∏è‚É£ Unique Index
	CREATE UNIQUE INDEX idx_email ON users(email);


Prevents duplicate values

3Ô∏è‚É£ Composite Index
	CREATE INDEX idx_user_city_age ON users(city, age);


Used when:

WHERE city = 'Delhi' AND age = 25;


‚ö† Order matters!

4Ô∏è‚É£ Clustered Index (MySQL InnoDB)

Data stored physically sorted

Only one per table

Primary key = clustered index

5Ô∏è‚É£ Non-Clustered Index

Index separate from table data

Points to row location

When NOT to Use Index

‚ùå On small tables
‚ùå On frequently updated columns
‚ùå Too many indexes slow down INSERT/UPDATE/DELETE

Index vs ACID (Important Interview Point)

| ACID                  | Index              |
| --------------------- | ------------------ |
| Data correctness      | Data performance   |
| Transaction guarantee | Query optimization |
| Logical concept       | Physical structure |
| Always required       | Optional           |


Indexes do not break ACID, but:
	More indexes ‚Üí slower writes	
	But reads become faster
	
üî• Real-World Example (Bank System)

ACID ensures:
	
	No money loss	
	No double debit
	Crash-safe transactions

Index ensures:
	
	Fast account lookup
	Quick transaction history queries
	
	